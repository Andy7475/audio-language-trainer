genanki allows you to programatically generate decks in Python 3 for Anki, a popular spaced-repetition flashcard program. Please see below for concepts and usage.

This library and its author(s) are not affiliated/associated with the main Anki project in any way.

CI

Notes
The basic unit in Anki is the Note, which contains a fact to memorize. Notes correspond to one or more Cards.

Here's how you create a Note:

my_note = genanki.Note(
  model=my_model,
  fields=['Capital of Argentina', 'Buenos Aires'])
You pass in a Model, discussed below, and a set of fields (encoded as HTML).

Models
A Model defines the fields and cards for a type of Note. For example:

my_model = genanki.Model(
  1607392319,
  'Simple Model',
  fields=[
    {'name': 'Question'},
    {'name': 'Answer'},
  ],
  templates=[
    {
      'name': 'Card 1',
      'qfmt': '{{Question}}',
      'afmt': '{{FrontSide}}<hr id="answer">{{Answer}}',
    },
  ])
This note-type has two fields and one card. The card displays the Question field on the front and the Question and Answer fields on the back, separated by a <hr>. You can also pass a css argument to Model() to supply custom CSS.

You need to pass a model_id so that Anki can keep track of your model. It's important that you use a unique model_id for each Model you define. Use import random; random.randrange(1 << 30, 1 << 31) to generate a suitable model_id, and hardcode it into your Model definition. You can print one at the command line with

python3 -c "import random; print(random.randrange(1 << 30, 1 << 31))"
Generating a Deck/Package
To import your notes into Anki, you need to add them to a Deck:

my_deck = genanki.Deck(
  2059400110,
  'Country Capitals')

my_deck.add_note(my_note)
Once again, you need a unique deck_id that you should generate once and then hardcode into your .py file.

Then, create a Package for your Deck and write it to a file:

genanki.Package(my_deck).write_to_file('output.apkg')
You can then load output.apkg into Anki using File -> Import...

Media Files
To add sounds or images, set the media_files attribute on your Package:

my_package = genanki.Package(my_deck)
my_package.media_files = ['sound.mp3', 'images/image.jpg']
media_files should have the path (relative or absolute) to each file. To use them in notes, first add a field to your model, and reference that field in your template:

my_model = genanki.Model(
  1091735104,
  'Simple Model with Media',
  fields=[
    {'name': 'Question'},
    {'name': 'Answer'},
    {'name': 'MyMedia'},                                  # ADD THIS
  ],
  templates=[
    {
      'name': 'Card 1',
      'qfmt': '{{Question}}<br>{{MyMedia}}',              # AND THIS
      'afmt': '{{FrontSide}}<hr id="answer">{{Answer}}',
    },
  ])
Then, set the MyMedia field on your card to [sound:sound.mp3] for audio and <img src="image.jpg"> for images.

You cannot put <img src="{MyMedia}"> in the template and image.jpg in the field. See these sections in the Anki manual for more information: Importing Media and Media & LaTeX.

You should only put the filename (aka basename) and not the full path in the field; <img src="images/image.jpg"> will not work. Media files should have unique filenames.