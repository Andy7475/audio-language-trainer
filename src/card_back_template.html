<div class="card">
    <hr id="answer">
    <div class="picture-container">{{Picture}}</div>
    <div class="prompt-template" style="display: none;">{{InsightsPrompt}}</div>
    <div class="target-text" onclick="copyToClipboard(this)">{{TargetText}}</div>
    <div class="english-text">{{EnglishText}}</div>

    <div class="audio-controls">
        <div class="audio-button-container">
            <div class="audio-label">Normal speed:</div>
            {{TargetAudio}}
        </div>
        <div class="audio-button-container">
            <div class="audio-label">Slow speed:</div>
            {{TargetAudioSlow}}
        </div>
    </div>

    <div class="wiktionary-links">{{WiktionaryLinks}}</div>
    
    <!-- Insights Button Container -->
    <div class="insights-container">
        <button class="insights-button" onclick="copyPromptAndRedirect()">
            <span class="insights-icon">ðŸ’¡</span>
            Learning Insights
        </button>
        <div class="info-icon" role="button" tabindex="0">â“˜
            <span class="info-tooltip">This will open claude.ai and copy a prompt to your clipboard. You can paste (Ctrl/Cmd+V) when you arrive.</span>
        </div>
    </div>
</div>

<script>
// Simple copy functionality for target text only
function copyToClipboard(element) {
    const text = element.textContent;
    navigator.clipboard.writeText(text).then(() => {
        element.classList.add('copied');
        setTimeout(() => {
            element.classList.remove('copied');
        }, 1000);
    });
}

// Learning Insights functionality - copies prompt and redirects
function copyPromptAndRedirect() {
    const fullPrompt = document.querySelector('.prompt-template').textContent;
    
    navigator.clipboard.writeText(fullPrompt).then(() => {
        const button = document.querySelector('.insights-button');
        button.classList.add('copied');
        setTimeout(() => {
            button.classList.remove('copied');
            window.open('https://claude.ai', '_blank');
        }, 500);
    }).catch(err => {
        console.error('Failed to copy text: ', err);
        window.open('https://claude.ai', '_blank');
    });
}
</script>